# Сервис ресурсов

<div style="text-align: center;">
  <img src="docs/logo.jpg" alt="Логотип проекта">
</div>

Сервис представляет собой RESTful API, который позволяет пользователям создавать и получать объекты.
Для аутентификации и авторизации используются JWT (JSON Web Tokens).

## Используемые технологии

- Java
- Spring Boot
- Spring WebFlux
- Spring Security
- MongoDB
- JWT

## Запуск сервиса

Для запуска сервис необходимо запустить контейнер mongodb, определенный в файле `docker-compose.yml`.

## Аутентификация и авторизация

Сервис использует JWT для аутентификации и авторизации. Для доступа к эндпоинтам ресурса пользователи
должны получить токены. Access и refresh токены могут быть получены через соответствующий
эндпоинт аутентификации. Сервис также предоставляет возможность обновления всех типов токенов.

Для реализации использован кастомный фильтр (см. `JwtFilter`).

Секреты, используемые для генерации токенов, хранятся в файле `application.yml` (см. `JwtService`).

## Роли пользователей и права доступа

- Пользователь:
    - Роль: USER
    - Права доступа: GET запросы для эндпоинтов ресурса

- Администратор:
    - Роль: ADMIN
    - Права доступа: POST, PUT, DELETE и GET запросы для эндпоинтов ресурса

Эти пользователи создаются в скрипте инициализации БД (см. `create-db.js`).

## Эндпоинты

### Аутентификация

- URL: `/resource-service/api/auth/login`
- Метод: POST
- Тело запроса: Учетные данные пользователя (имя пользователя и пароль)
- Ответ: Access и refresh токены

Этот эндпоинт позволяет пользователям аутентифицироваться и получить access и refresh токены.

### Обновление access токена

- URL: `/resource-service/api/auth/token`
- Метод: POST
- Тело запроса: Refresh токен
- Ответ: Новый access токен

Этот эндпоинт позволяет пользователям обновить access токен с помощью действующего refresh токена.

### Обновление refresh токена

- URL: `/resource-service/api/auth/refresh`
- Метод: POST
- Тело запроса: Refresh токен
- Ответ: Новый refresh токен

Этот эндпоинт позволяет пользователям обновить refresh токен с помощью действующего refresh токена.

## База данных

Объекты ресурсов хранятся в базе данных MongoDB.
Конфигурация базы данных может быть найдена в файле `application.yml`.

